(this.webpackJsonpdm=this.webpackJsonpdm||[]).push([[0],{18:function(e,t,a){"use strict";a.r(t),a.d(t,"AuthTypes",(function(){return i})),a.d(t,"INITIAL_STATE",(function(){return d})),a.d(t,"AuthSelectors",(function(){return h})),a.d(t,"setShopToSee",(function(){return p})),a.d(t,"loginRequest",(function(){return E})),a.d(t,"loginSuccess",(function(){return b})),a.d(t,"loginFailure",(function(){return f})),a.d(t,"signUpRequest",(function(){return g})),a.d(t,"signUpSuccess",(function(){return _})),a.d(t,"signUpFailure",(function(){return v})),a.d(t,"logoutRequest",(function(){return S})),a.d(t,"logoutSuccess",(function(){return y})),a.d(t,"logoutFailure",(function(){return N})),a.d(t,"resetAuthErrors",(function(){return k})),a.d(t,"toggleModal",(function(){return T})),a.d(t,"checkTokenRequest",(function(){return w})),a.d(t,"checkTokenSuccess",(function(){return x})),a.d(t,"checkTokenFail",(function(){return O})),a.d(t,"checkAuthSuccess",(function(){return C})),a.d(t,"reducer",(function(){return A}));var n,l=a(15),r=a(129),c=a(175),s=a.n(c),o=Object(r.createActions)({loginRequest:["data"],loginSuccess:["user"],loginFailure:["error"],signupRequest:["data"],signupSuccess:["user"],signupFailure:["error"],logoutRequest:null,logoutSuccess:null,logoutFailure:["error"],checkTokenRequest:["payload"],checkTokenSuccess:["payload"],checkTokenFail:["error"],resetAuthErrors:null,restorePasswordRequest:["data"],restorePasswordSuccess:null,restorePasswordFailure:["error"],toggleModal:["isAuthModalOpen"],checkAuthRequest:["payload"],checkAuthSuccess:["payload"],checkAuthFail:null,setShopToSee:["shop"]}),u=o.Types,m=o.Creators,i=u;t.default=m;var d=s()({fetching:!1,user:null,error:"",isLoggedIn:!1,isLoggingIn:!1,shopToSee:{}}),h={getUser:function(e){return e.user}},p=function(e,t){var a=t.shop;return e.merge({shopToSee:a})},E=function(e,t){t.data;return e.merge({fetching:!0,user:null,isLoggingIn:!0,isLoggedIn:!1,shopToSee:{}})},b=function(e,t){var a=t.user;return e.merge({fetching:!1,error:null,user:a,isLoggedIn:!0,isLoggingIn:!1})},f=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,user:null,isLoggedIn:!1,isLoggingIn:!1})},g=function(e,t){t.data;return e.merge({fetching:!0,user:{},isLoggingIn:!0,isLoggedIn:!1})},_=function(e,t){var a=t.user;return e.merge({fetching:!1,error:null,user:a,isLoggingIn:!1,isLoggedIn:!0})},v=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,user:null,isLoggingIn:!1,isLoggedIn:!1})},S=function(e){return e.merge({fetching:!0,isLoggingIn:!0})},y=function(e){return e.merge({fetching:!1,error:null,user:null,isLoggingIn:!1,isLoggedIn:!1})},N=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,isLoggingIn:!1})},k=function(e){return e.merge({fetching:!1,error:null})},T=function(e,t){var a=t.isAuthModalOpen;return e.merge({isAuthModalOpen:a,error:null})},w=function(e,t){t.payload;return e.merge({fetching:!0})},x=function(e,t){var a=t.payload;return e.merge({fetching:!1,error:null,user:a.user,isLoggedIn:!0,isLoggingIn:!1})},O=function(e,t){var a=t.error;return e.merge({fetching:!1,error:a,user:null,isLoggedIn:!1,isLoggingIn:!1})},C=function(e,t){var a=t.payload;return e.merge({user:a,isLoggedIn:!0,isLogginIn:!1})},A=Object(r.createReducer)(d,(n={},Object(l.a)(n,u.SET_SHOP_TO_SEE,p),Object(l.a)(n,u.LOGIN_REQUEST,E),Object(l.a)(n,u.LOGIN_SUCCESS,b),Object(l.a)(n,u.LOGIN_FAILURE,f),Object(l.a)(n,u.SIGNUP_REQUEST,g),Object(l.a)(n,u.SIGNUP_SUCCESS,_),Object(l.a)(n,u.SIGNUP_FAILURE,v),Object(l.a)(n,u.CHECK_TOKEN_REQUEST,w),Object(l.a)(n,u.CHECK_TOKEN_FAIL,O),Object(l.a)(n,u.CHECK_TOKEN_SUCCESS,x),Object(l.a)(n,u.LOGOUT_REQUEST,S),Object(l.a)(n,u.LOGOUT_SUCCESS,y),Object(l.a)(n,u.LOGOUT_FAILURE,N),Object(l.a)(n,u.TOGGLE_MODAL,T),Object(l.a)(n,u.RESET_AUTH_ERRORS,k),Object(l.a)(n,u.CHECK_AUTH_SUCCESS,C),n))},195:function(e,t,a){e.exports=a(378)},378:function(e,t,a){"use strict";a.r(t);var n=a(0),l=a.n(n),r=a(14),c=a.n(r),s=a(100),o=a(25),u=a(20),m=a(24),i=a(174),d=a(183),h=a(34),p=a.n(h),E=a(23),b=a(11),f=a.n(b),g="".concat("http://77.222.54.204","/api"),_={JWT_AUTH:"".concat(g,"/jwt/api-token-auth/"),JWT_CHECK_TOKEN:"".concat(g,"/jwt/api-token-verify/"),STOCK_PAGE_STOCK:"".concat(g,"/stock_page/"),STOCK_PAGE_SET_LUMBER_PRICE:"".concat(g,"/stock_page/set_price/"),SHIFT_LIST_PAGE_LIST:"".concat(g,"/shift_list_page/"),shift_list_delete:function(e){return"".concat(g,"/shift_list_page/").concat(e,"/")},SHIFT_CREATE_PAGE_DATA:"".concat(g,"/shift_create_page/init/"),SHIFT_CREATE_PAGE_CREATE:"".concat(g,"/manager/shifts/create/"),SALE_CREATE_PAGE_DATA:"".concat(g,"/sale_create_page/init/"),SALE_CREATE_PAGE_CREATE:"".concat(g,"/sale_create_page/create/"),SALE_LIST_PAGE_LIST:"".concat(g,"/sale_list_page/"),sale_list_delete:function(e){return"".concat(g,"/sale_list_page/").concat(e,"/")},EXPENSES_PAGE_LIST:"".concat(g,"/expenses_page/list/"),EXPENSES_PAGE_CREATE:"".concat(g,"/expenses_page/create_expense/"),expenses_page_delete:function(e){return"".concat(g,"/expenses_page/").concat(e,"/")},STOCK:"".concat(g,"/common/stock/"),SHIFTS:"".concat(g,"/common/shifts/"),SALES:"".concat(g,"/common/sales/"),RESAWS:"".concat(g,"/common/resaw/"),DAILY_REP:"".concat(g,"/common/daily_report/"),SALE_CALC_DATA:"".concat(g,"/common/sales/calc_data/"),INCOME_TIMBERS:"".concat(g,"/common/income_timbers/"),QUOTAS:"".concat(g,"/common/quotas/"),RAMSHIK_SHIFT_LIST:"".concat(g,"/ramshik/shifts/list/"),RAMSHIK_PAYOUTS:"".concat(g,"/ramshik/payouts/"),EMPLOYEE_PAYOUT_INIT_DATA:"".concat(g,"/manager/ramshik_payments/init_data/"),EMPLOYEE_PAYOUT:"".concat(g,"/manager/ramshik_payments/ramshik_payout/"),EMPLOYEE_CREATE:"".concat(g,"/manager/ramshiki/create/"),manager_ramshiki_delete:function(e){return"".concat(g,"/manager/ramshiki/").concat(e,"/")},MANAGER_SHIFT_LIST:"".concat(g,"/manager/shift_list/"),MANAGER_STOCK:"".concat(g,"/manager/stock/"),MANAGER_STOCK_SET_LUMBER_PRICE:"".concat(g,"/manager/stock/set_price/"),MANAGER_SALE_LIST:"".concat(g,"/manager/sale_list/"),MANAGER_RAWSTOCK_INCOME_INIT_DATA:"".concat(g,"/manager/rawstock/timber/create_income/init_data/"),MANAGER_RAWSTOCK_INCOME_CREATE:"".concat(g,"/manager/rawstock/timber/create_income/"),manager_rawstock_income_delete:function(e){return"".concat(g,"/manager/rawstock/timber/income_timbers/").concat(e,"/")},MANAGER_SHIFT_CREATE_DATA:"".concat(g,"/manager/shifts/create/init_data/"),MANAGER_SHIFT_CREATE:"".concat(g,"/manager/shifts/create/"),manager_shift_delete:function(e){return"".concat(g,"/manager/shifts/").concat(e,"/")},MANAGER_SALE_INIT_DATA:"".concat(g,"/manager/sales/create/init_data/"),MANAGER_SALE_CREATE:"".concat(g,"/manager/sales/create/"),manager_delete_sale:function(e){return"".concat(g,"/manager/sales/").concat(e,"/")},MANAGER_CASH_RECORDS_LIST:"".concat(g,"/manager/cash_records/list/"),MANAGER_CASH_RECORDS_CREATE:"".concat(g,"/manager/cash_records/create_expense/"),manager_delete_expense:function(e){return"".concat(g,"/manager/cash_records/").concat(e,"/")},MANAGER_RESAW_CREATE:"".concat(g,"/manager/resaws/create/"),manager_delete_resaw:function(e){return"".concat(g,"/manager/resaws/").concat(e,"/")},CAPO_BOSS_PAYOUT_MANAGER_CREATE:"".concat(g,"/boss_capo/cash_records/payout_to_manager/"),boss_delete_manager_payout:function(e){return"".concat(g,"/boss_capo/cash_records/").concat(e,"/")}},v=function(){return{logIn:function(e){var t=e.username,a=e.password;return f.a.post(_.JWT_AUTH,{username:t,password:a}).then((function(e){if(e.status<200||e.status>=300)throw new Error(e);return{token:e.data.token,user:e.data.user}})).catch((function(e){throw new Error(e.response.data[Object.keys(e.response.data)[0]][0])})).then((function(e){return localStorage.setItem("token",e.token),e.user}))},checkToken:function(e){return f.a.post(_.JWT_CHECK_TOKEN,{token:e}).then((function(e){return{user:e.data.user}})).catch((function(e){throw new Error(e.response.data[Object.keys(e.response.data)[0]][0])}))},logOut:function(){localStorage.removeItem("token")},signUp:function(e){var t=e.email,a=e.phone;return f.a.post(_.SIGNUP,{email:t,phone:a}).then((function(e){return e.data})).catch((function(e){throw new Error(e.response.data[Object.keys(e.response.data)[0]])}))},checkAuth:function(e){var t=localStorage.getItem("token");if(!t)throw new Error("\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430");return f.a.post(_.JWT_CHECK_TOKEN,{token:t}).then((function(t){var a=t.data.user,n=a.group;if(-1===e.indexOf(n))throw new Error("\u041d\u0435\u0442 \u0434\u043e\u0441\u0442\u0443\u043f\u0430");return a})).catch((function(e){throw new Error(e.message)}))}}},S=a(18),y=p.a.mark(T),N=p.a.mark(w),k=p.a.mark(x);function T(e,t){var a,n;return p.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return a=t.data,l.next=3,Object(E.c)(S.default.resetAuthErrors());case 3:return l.prev=3,l.next=6,Object(E.b)(e.logIn,a);case 6:return n=l.sent,l.next=9,Object(E.c)(S.default.loginSuccess(n));case 9:return l.next=11,Object(E.c)(S.default.toggleModal(!1));case 11:l.next=17;break;case 13:return l.prev=13,l.t0=l.catch(3),l.next=17,Object(E.c)(S.default.loginFailure(l.t0.message));case 17:case"end":return l.stop()}}),y,null,[[3,13]])}function w(e,t){return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(E.b)(e.logOut);case 3:return t.next=5,Object(E.c)(S.default.logoutSuccess());case 5:t.next=11;break;case 7:return t.prev=7,t.t0=t.catch(0),t.next=11,Object(E.c)(S.default.logoutFailure(t.t0.message));case 11:case"end":return t.stop()}}),N,null,[[0,7]])}function x(e,t){var a,n;return p.a.wrap((function(l){for(;;)switch(l.prev=l.next){case 0:return a=t.payload,l.prev=1,l.next=4,Object(E.b)(e.checkToken,a);case 4:return n=l.sent,l.next=7,Object(E.c)(S.default.checkTokenSuccess(n));case 7:l.next=13;break;case 9:return l.prev=9,l.t0=l.catch(1),l.next=13,Object(E.c)(S.default.checkTokenFail(l.t0.message));case 13:case"end":return l.stop()}}),k,null,[[1,9]])}var O=p.a.mark(A),C=v();function A(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(E.a)([Object(E.d)(S.AuthTypes.LOGIN_REQUEST,T,C),Object(E.d)(S.AuthTypes.LOGOUT_REQUEST,w,C),Object(E.d)(S.AuthTypes.CHECK_TOKEN_REQUEST,x,C)]);case 2:case"end":return e.stop()}}),O)}var j=a(424),R=Object(m.combineReducers)({auth:a(18).reducer,form:j.a}),I=a(182),L=a(26),D=a(27),F=a(29),P=a(28),V=a(418),M=a(184),G=a(422),q=a(421),U=a(425),H=["label","placeholder","input","multiline","meta","labelClass"],J=function(e){var t=e.label,a=e.placeholder,n=e.input,r=e.multiline,c=e.meta,s=c.touched,o=c.invalid,u=c.error,m=e.labelClass,i=Object(M.a)(e,H);return l.a.createElement(U.a,Object.assign({fullWidth:!0,label:t,placeholder:a,error:s&&o,helperText:s&&u},n,i,{multiline:r,InputLabelProps:{className:m}}))};function W(e){var t=e.parentSubmit,a=e.pristine,n=(e.reset,e.submitting),r=e.handleSubmit;e.eventFetching,e.eventError,e.message;return l.a.createElement("div",{className:"card card-style"},l.a.createElement("div",{className:"content"},l.a.createElement("form",{onSubmit:r(t),className:""},l.a.createElement(G.a,{component:J,label:"\u041b\u043e\u0433\u0438\u043d",name:"username",margin:"dense"}),l.a.createElement(G.a,{component:J,label:"\u041f\u0430\u0440\u043e\u043b\u044c",name:"password",margin:"dense",type:"password"}),l.a.createElement("button",{className:"btn btn-m mt-2 font-900 shadow-s bg-highlight text-wrap",type:"submit",disabled:a||n},"\u0412\u043e\u0439\u0442\u0438"))))}function K(e){var t=e.startDate,a=e.endDate,n=e.setData,r=e.showResults;return l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement(U.a,{label:"\u0414\u0430\u0442\u0430 \u0441",type:"date",name:"startDate",className:"mr-2",value:t,onChange:n,InputLabelProps:{className:"",shrink:!0}}),l.a.createElement(U.a,{label:"\u0414\u0430\u0442\u0430 \u0434\u043e",type:"date",name:"endDate",className:"mr-2",value:a,onChange:n,InputLabelProps:{className:"",shrink:!0}}),l.a.createElement("button",{className:"btn btn-xs bg-highlight",onClick:r},"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"))}function Q(e){var t=e.date,a=e.setData,n=e.showResults;return l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement(U.a,{type:"date",name:"date",className:"mr-2",value:t,onChange:a,InputLabelProps:{className:"",shrink:!0}}),l.a.createElement("button",{className:"btn btn-xs bg-highlight",onClick:n},"\u043f\u043e\u043a\u0430\u0437\u0430\u0442\u044c"))}function z(e){var t=Object(o.f)();return l.a.createElement("div",{className:"card-style mx-5 my-3 pt-2",onClick:function(){t.push(e.to)},style:{background:"white",width:"300px",color:"white","font-weight":"bold","font-size":"1em","text-align":"center","word-break":"break-word","border-radius":"15px","line-height":"12px"}},l.a.createElement("h5",null,e.title))}function B(e){var t=e.user;return e.setShopToSee(t.can_see_shop_stock),l.a.createElement("div",{className:" "},l.a.createElement("div",{className:"my-4"},l.a.createElement("h3",{className:"text-center"},"\u0421\u043a\u043b\u0430\u0434"),l.a.createElement(z,{title:"\u0421\u043a\u043b\u0430\u0434. \u0422\u0435\u043a\u0443\u0449\u0438\u0435 \u043e\u0441\u0442\u0430\u0442\u043a\u0438",to:"/manager/stock/"})),l.a.createElement("div",{className:"my-4"},l.a.createElement("h3",{className:"text-center"},"\u041f\u0440\u0438\u0445\u043e\u0434 \u043f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b\u043e\u0432"),l.a.createElement(z,{title:"\u041f\u0440\u0438\u0445\u043e\u0434 \u0441\u043f\u0438\u0441\u043e\u043a",to:"/manager/shift_list/"}),l.a.createElement(z,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u0438\u0445\u043e\u0434",to:"/manager/shift/create_shift/"})),l.a.createElement("div",{className:"my-4"},l.a.createElement("h3",{className:"text-center"},"\u041f\u0440\u043e\u0434\u0430\u0436\u0438"),l.a.createElement(z,{title:"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043f\u0440\u043e\u0434\u0430\u0436\u0443",to:"/manager/sales/create_sale/"}),l.a.createElement(z,{title:"\u041f\u0440\u043e\u0434\u0430\u0436\u0438 \u0441\u043f\u0438\u0441\u043e\u043a",to:"/manager/sale_list/"})),l.a.createElement("div",{className:"my-4"},l.a.createElement("h3",{className:"text-center"},"\u041e\u0442\u0447\u0435\u0442\u044b \u0438 \u0440\u0430\u0441\u0445\u043e\u0434\u044b"),l.a.createElement(z,{title:"\u0420\u0430\u0441\u0445\u043e\u0434\u044b",to:"/manager/expenses/"}),l.a.createElement(z,{title:"\u0420\u0430\u0441\u0447\u0435\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432",to:"/manager/ramshik_payments/"}),l.a.createElement(z,{title:"\u0418\u0442\u043e\u0433\u0438 \u0437\u0430 \u0434\u0435\u043d\u044c",to:"/manager/daily_report/"})))}W=Object(q.a)({form:"loginForm",validate:function(e){var t={};return["username","password"].forEach((function(a){e[a]||(t[a]="\u041e\u0431\u044f\u0437\u0430\u0442\u0435\u043b\u044c\u043d\u043e\u0435 \u043f\u043e\u043b\u0435")})),t}})(W);var Y=function(e){Object(F.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).login=function(){n.props.login(n.props.form.values)},n.state={username:"",password:""},n}return Object(D.a)(a,[{key:"render",value:function(){var e=this.props.state.auth,t=e.isLoggedIn,a=e.fetching,n=e.user,r=e.shopToSee;return a?l.a.createElement(V.a,null):t?l.a.createElement(B,{user:n,shopToSee:r,setShopToSee:this.props.setShopToSee}):l.a.createElement(W,{parentSubmit:this.login})}}]),a}(n.Component),X=Object(u.b)((function(e){return{routing:e.routing,state:e,form:e.form.loginForm}}),(function(e){return{login:function(t){return e(S.default.loginRequest(t))},logout:function(t){return e(S.default.logoutRequest(t))},checkToken:function(t){return e(S.default.checkTokenRequest(t))},setShopToSee:function(t){return e(S.default.setShopToSee(t))}}}))(Y);function Z(e){var t=Object(o.f)();return l.a.createElement("div",{className:"d-flex justify-content-between px-3 py-2"},l.a.createElement("h4",{className:"text-center pt-2 w-100 pl-4",onClick:function(){t.push("/")}},e.shopToSee.name),l.a.createElement("button",{className:"btn btn-xs bg-red1-light",style:{lineHeight:"13px"},onClick:function(){e.logout(),t.push("/")}},l.a.createElement("span",{className:"py-0 my-0"},l.a.createElement("span",{className:"d-block"},e.user.nickname),"\u0432\u044b\u0439\u0442\u0438")))}var $=function(e){Object(F.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).state={modalOpen:!1},n}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=localStorage.getItem("token");e&&this.props.checkToken(e)}},{key:"render",value:function(){var e=this.props.auth,t=(e.isLoggedIn,e.fetching,e.user),a=e.shopToSee;return t?l.a.createElement("div",{className:"header"},l.a.createElement(Z,{logout:this.props.logout,user:t,shopToSee:a,setShopToSee:this.props.setShopToSee})):"net login"}}]),a}(n.Component),ee=Object(u.b)((function(e){return{state:e,auth:e.auth,routing:e.routing}}),(function(e){return{checkToken:function(t){return e(S.default.checkTokenRequest(t))},logout:function(){return e(S.default.logoutRequest())},setShopToSee:function(t){return e(S.default.setShopToSee(t))}}}))($),te=a(423),ae=function(e){if(e&&"undefined"!==typeof e.response){var t={status:e.response.status,statusText:e.response.statusText,message:null,response:e.response};if("message"in e.response.data)t.message=JSON.stringify(e.response.data.message);else{var a="";for(var n in e.response.data)a+="".concat(n,": ").concat(e.response.data[n],". ");t.message=a}return t}return{status:"Connection Error",statusText:"An error occurred while sending your data!",message:"An error occurred while sending your data!"}},ne=function(e){var t=new URLSearchParams;return null!=e&&Object.keys(e).forEach((function(a){null===e[a]||e[a]instanceof Array||t.append(a,e[a]),null!==e[a]&&e[a]instanceof Array&&(delete t[a],e[a].map((function(e){return""!==e&&t.append(a,e),null})))})),t},le=function(){return{getStock:function(e){var t=localStorage.getItem("token"),a=ne(e);return f()({method:"get",url:_.STOCK_PAGE_STOCK,params:a,headers:{Authorization:"JWT ".concat(t)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=ae(e),t}))},setLumberPrice:function(e){var t=localStorage.getItem("token")||"",a=_.STOCK_PAGE_SET_LUMBER_PRICE;return f()({method:"post",url:a,data:e,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(t)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=ae(e),t}))}}},re=a(49),ce=a(133),se=a.n(ce),oe=function(e,t){return se.a.xor(e,[t])},ue=function(e,t){var a=null;return e.map((function(e){e.id==t&&(a=e)})),a},me=function(e,t){for(var a=!1,n=-1,l=0;l<e.length;l++)if(e[l].id===t.id){a=!0,n=l;break}return a?(e.splice(n,1),e):[].concat(Object(re.a)(e),[t])};function ie(e,t){var a=ue(e,t.id),n=e.indexOf(a);return e=[].concat(Object(re.a)(e.slice(0,n)),[t],Object(re.a)(e.slice(n+1)))}function de(){var e=new Date,t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0"),n=e.getFullYear();return e=n+"-"+a+"-"+t}function he(e){var t=String(e.getDate()).padStart(2,"0"),a=String(e.getMonth()+1).padStart(2,"0");return e.getFullYear()+"-"+a+"-"+t}var pe=le();function Ee(e){var t=e.lumber,a=e.showNull,n=e.changeMarketCost,r=e.user,c=!0;0!=t.current_stock_quantity||a||(c=!1);var s="pine"===t.wood_species?"\u0441\u043e\u0441\u043d\u0430":"\u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430",o="\u0441\u043e\u0441\u043d\u0430"===s?"color-green1-light":"color-brown1-light";return c&&l.a.createElement("tr",null,l.a.createElement("td",null,t.full_name,l.a.createElement("span",{className:"d-block font-italic font-500 "+o},s)),l.a.createElement("td",null,l.a.createElement("span",{className:"font-16"},t.current_stock_volume.toFixed(4)),l.a.createElement("span",{className:"d-block"},"\u043c3")),l.a.createElement("td",null,l.a.createElement("span",{className:"font-16"},t.current_stock_quantity),"\u0448\u0442"),l.a.createElement("td",null,r.is_manager&&l.a.createElement(U.a,{type:"number",className:"",value:t.shop_rate>0&&t.shop_rate,onChange:function(e){return n(e,t.id)}}),r.is_kladman&&l.a.createElement("span",{className:"font-16"},t.shop_rate)),l.a.createElement("td",null,l.a.createElement("span",{className:"font-16"},t.stock_total_cash.toFixed(0)),"\u0440"))}var be=function(e){Object(F.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).changeMarketCost=function(e,t){var a=n.state.lumbers,l=ue(a,t);pe.setLumberPrice({lumber:t,shop_rate:parseInt(e.target.value)||0}).then((function(e){l=e})),l.shop_rate=parseInt(e.target.value)||0,l.stock_total_cash=l.shop_rate*l.current_stock_volume,a=ie(a,l),n.setState({lumbers:a})},n.state={lumbers:[],showNull:!1,message:null,error:null},n}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this;pe.getStock({shop:this.props.shopToSee.id}).then((function(t){e.setState({lumbers:t.results})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbers,n=t.showNull,r=0,c=0;return a.map((function(e){r+=e.current_stock_volume,c+=e.stock_total_cash})),l.a.createElement("div",{className:"mt-2"},l.a.createElement("div",{className:"card card-style mb-2"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("h4",{className:"mb-2"},"\u0421\u043a\u043b\u0430\u0434"),l.a.createElement("div",{className:"my-0"},l.a.createElement("label",null,"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u043d\u0443\u043b\u0435\u0432\u044b\u0435 \u0437\u043d\u0430\u0447\u0435\u043d\u0438\u044f"),l.a.createElement(te.a,{checked:this.state.showNull,onChange:function(){return e.setState({showNull:!e.state.showNull})},name:"showNull"}))),l.a.createElement("div",{className:"d-flex justify-content-start"},a.length>0&&l.a.createElement("table",{className:"table table-sm table-responsive",style:{lineHeight:"17px"}},l.a.createElement("thead",null,l.a.createElement("th",null,"\u043f\u0438\u043b\u043e\u043c\u0430\u0442"),l.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),l.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),l.a.createElement("th",null,"\u0446\u0435\u043d\u0430 \u0437\u0430 1\u043c3"),l.a.createElement("th",null,"\u0441\u0442\u043e\u0438\u043c\u043ec\u0442\u044c \u043e\u0431\u0449\u0430\u044f")),l.a.createElement("tbody",null,a.map((function(t){return l.a.createElement(Ee,{lumber:t,showNull:n,changeMarketCost:e.changeMarketCost,user:e.props.user})})),l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("span",{className:"font-16 font-500"},"\u0418\u0442\u043e\u0433\u043e")),l.a.createElement("td",null,l.a.createElement("span",{className:"font-16 font-500"},r.toFixed(3)),l.a.createElement("span",{className:"d-block"},"\u043c3")),l.a.createElement("td",null),l.a.createElement("td",null),l.a.createElement("td",null,l.a.createElement("span",{className:"font-16 font-500"},c.toFixed(0)),l.a.createElement("span",{className:"d-block"},"\u0440\u0443\u0431\u043b\u0435\u0439")))))))))}}]),a}(n.Component),fe=Object(u.b)((function(e){return{user:e.auth.user,shopToSee:e.auth.shopToSee}}),(function(e){return{dispatch:e}}))(be),ge=a(9),_e=a(15);function ve(e){var t=e.record;return l.a.createElement("tr",null,l.a.createElement("td",{style:{lineHeight:"15px"}},"larch"===t.wood_species?l.a.createElement("span",{className:"d-block color-brown1-light"},"\u043b\u0438\u0441\u0442\u0432"):l.a.createElement("span",{className:"d-block color-green1-light"},"\u0441\u043e\u0441\u043d\u0430"),t.lumber.includes("\u0434\u043e\u0441\u043a\u0430")?l.a.createElement("span",{className:"font-italic"},t.lumber):l.a.createElement("span",{className:""},t.lumber)),l.a.createElement("td",null,t.quantity,l.a.createElement("span",{className:"font-10"}," \u0448\u0442")),l.a.createElement("td",null,t.volume,l.a.createElement("span",{className:"font-10"}," \u043c3")),l.a.createElement("td",null,t.rate,l.a.createElement("span",{className:"font-10"}," \u0440")),l.a.createElement("td",null,t.total_cash,l.a.createElement("span",{className:"font-10"}," \u0440")))}function Se(e){var t=e.shift,a=(e.user,e.deleteShift);return l.a.createElement("div",{className:"card card-style"},l.a.createElement("div",{className:"content mb-1"},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("p",{className:"color-black mb-0 font-16"},"\u0414\u0430\u0442\u0430: ",t.date," ",t.shift_type),l.a.createElement("button",{className:"btn btn-s bg-red1-light mr-2 text-uppercase",onClick:function(){return a(t.id)}},"\u0443\u0434\u0430\u043b\u0438\u0442\u044c")),l.a.createElement("p",{className:"color-black mb-0 font-13 d-flex justify-content-between",style:{lineHeight:"15px"}},l.a.createElement("span",{className:"d-block mb-1"},"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a: ",l.a.createElement("span",{className:"d-block font-600 font-14"},t.employees[0])),l.a.createElement("span",{className:"d-block mb-1"},"\u041e\u0431\u044a\u0435\u043c: ",l.a.createElement("span",{className:"d-block font-600 font-14"},t.volume," m3")),l.a.createElement("span",null,"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430: ",l.a.createElement("span",{className:"d-block font-600 font-14"},t.back_calc_cash," \u0440")))),l.a.createElement("div",{className:"content mt-0"},l.a.createElement("table",{className:"table table-sm"},l.a.createElement("thead",null,l.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),l.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),l.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),l.a.createElement("th",null,"\u0446\u0435\u043d\u0430"),l.a.createElement("th",null,"\u0441\u0443\u043c\u043c\u0430")),l.a.createElement("tbody",null,t.lumber_records.map((function(e){return l.a.createElement(ve,{record:e})}))))))}function ye(e){var t=e.shiftList,a=e.user,n=e.deleteShift;return l.a.createElement("div",{className:"mt-2"},l.a.createElement("h4",{className:"my-3 text-center"},"\u0421\u043c\u0435\u043d\u044b  (",t.length,")"),t.length>0&&t.map((function(e){return l.a.createElement(Se,{shift:e,user:a,deleteShift:n})})))}var Ne=function(){return{getShiftList:function(e){var t=localStorage.getItem("token"),a=ne(e);return f()({method:"get",url:_.SHIFT_LIST_PAGE_LIST,headers:{Authorization:"JWT ".concat(t)},params:a}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=ae(e),t}))},deleteShift:function(e){var t=localStorage.getItem("token")||"";return f()({method:"delete",url:_.shift_list_delete(e),headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(t)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=ae(e),t}))}}}(),ke=function(e){Object(F.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).setData=function(e){n.setState(Object(_e.a)({},e.target.name,e.target.value))},n.showResults=function(){Ne.getShiftList({shop:n.props.shopToSee.id,date_before:n.state.endDate,date_after:n.state.startDate}).then((function(e){n.setState(Object(ge.a)(Object(ge.a)({},n.state),{},{shiftList:e.results}))}))},n.deleteShift=function(e){Ne.deleteShift(e).then((function(e){n.setState({shiftList:e.shifts})}))},n.state={shiftList:[],startDate:"",endDate:"",message:null,error:null},n}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new Date,a=new Date;a.setDate(t.getDate()-1);var n=he(a),l=he(t);Ne.getShiftList({shop:this.props.shopToSee.id,date_before:l,date_after:n}).then((function(t){e.setState(Object(ge.a)(Object(ge.a)({},e.state),{},{shiftList:t.results,startDate:n,endDate:l}))}))}},{key:"render",value:function(){return l.a.createElement("div",null,l.a.createElement("div",{className:"card card-style mt-2"},l.a.createElement("div",{className:"content"},l.a.createElement(K,{startDate:this.state.startDate,endDate:this.state.endDate,setData:this.setData,showResults:this.showResults}))),l.a.createElement(ye,{shiftList:this.state.shiftList,user:this.props.user,deleteShift:this.deleteShift}))}}]),a}(n.Component),Te=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,shopToSee:e.auth.shopToSee,state:e}}),(function(e){return{}}))(ke);function we(e){var t=e.lumber,a=e.calcType,n=e.calcRowAndTotal,r=e.key,c=l.a.createElement("tr",{key:r},l.a.createElement("td",null,t.full_name,"pine"===t.wood_species?l.a.createElement("span",{className:"d-block color-brown1-light"},"\u0441\u043e\u0441\u043d\u0430"):l.a.createElement("span",{className:"d-block color-green2-light"},"\u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430")),l.a.createElement("td",{className:"w-25"},l.a.createElement("input",{style:{color:"#6c6c6c"},name:"quantity",type:"number",className:"w-75",onChange:function(e){return n(e,t)},value:t.quantity>0&&t.quantity})),l.a.createElement("td",null,t.volume_total>0&&t.volume_total.toFixed(4)+" \u043c3"),l.a.createElement("td",{className:"w-25"},l.a.createElement("input",{style:{color:"#6c6c6c"},name:"rate",type:"number",className:"w-100",onChange:function(e){return n(e,t)},value:t.employee_rate>0&&t.employee_rate})),l.a.createElement("td",null,t.cash>0&&t.cash.toFixed(0)+" \u0440\u0443\u0431"));return"mixed"===a&&"doska"!==t.lumber_type&"larch"===t.wood_species|"pine"===t.wood_species||"sorted"===a?c:null}function xe(e){var t=e.lumbers,a=e.calcRowAndTotal,n=e.totalVolume,r=e.totalCash,c=e.calcType;return l.a.createElement("table",{className:"table table-sm table-responsive text-center",style:{lineHeight:"17px",color:"#6c6c6c"}},l.a.createElement("thead",null,l.a.createElement("th",null,"\u0418\u0437\u0434\u0435\u043b\u0438\u0435"),l.a.createElement("th",null,"\u041a\u043e\u043b-\u0432\u043e"),l.a.createElement("th",null,"\u041e\u0431\u044c\u0435\u043c"),l.a.createElement("th",null,"\u0426\u0435\u043d\u0430"),l.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430")),l.a.createElement("tbody",null,t.map((function(e,t){return l.a.createElement(we,{lumber:e,calcType:c,calcRowAndTotal:a,key:t})})),l.a.createElement("tr",null,l.a.createElement("td",null,"\u0418\u0442\u043e\u0433\u043e"),l.a.createElement("td",{className:"w-25"},"-"),l.a.createElement("td",null,l.a.createElement("span",{className:"font-17 font-600"},n>0&&n.toFixed(4)+" \u043c3")),l.a.createElement("td",null,"-"),l.a.createElement("td",null,l.a.createElement("span",{className:"font-17 font-600"},r>0&&r.toFixed(0)+" \u0440\u0443\u0431")))))}function Oe(e){var t=e.lumbers;return l.a.createElement("table",{className:"table table-sm table-responsive mt-2"},l.a.createElement("thead",null,l.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),l.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),l.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),l.a.createElement("th",null,"\u0446\u0435\u043d\u0430 \u0437\u0430 \u043c3"),l.a.createElement("th",null,"\u0441\u0443\u043c\u043c\u0430")),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name?e.name:e.lumber),l.a.createElement("td",null,e.quantity," \u0448\u0442"),l.a.createElement("td",null,e.volume_total?e.volume_total.toFixed(4)+"\u043c3":e.volume.toFixed(4)+"\u043c3"),l.a.createElement("td",null,e.rate||e.employee_rate," \u0440\u0443\u0431"),l.a.createElement("td",null,(e.total_cash||e.cash).toFixed(0)," \u0440\u0443\u0431"))}))))}function Ce(e){var t=e.shift,a=e.saveData,n=e.back,r="mb-0 font-15 font-500 color-black";return l.a.createElement("div",{className:"card card-style my-2"},l.a.createElement("div",{className:"content"},l.a.createElement("h4",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435"),t&&l.a.createElement("div",{className:""},l.a.createElement("p",{className:r},"\u041e\u0431\u044a\u0435\u043c \u043e\u0431\u0449\u0438\u0439: ",t.volume.toFixed(4)," \u043c3"),l.a.createElement("p",{className:r},"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430: ",t.employee_cash.toFixed(1)," \u0440\u0443\u0431\u043b\u0435\u0439"),l.a.createElement("p",{className:r},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),l.a.createElement(Oe,{lumbers:t.raw_records})),l.a.createElement("div",{className:"d-flex justify-content-around"},l.a.createElement("button",{onClick:n,className:"btn btn-m text-uppercase font-900 bg-dark color-white rounded-sm shadow-l"},"\u043d\u0430\u0437\u0430\u0434"),l.a.createElement("button",{onClick:a,className:"btn btn-m text-uppercase font-900 bg-highlight rounded-sm shadow-l"},"\u0421\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))))}function Ae(e){var t=e.shift,a=e.message,n="mb-0 font-15 font-500 color-black";return l.a.createElement("div",{className:"card card-style my-2"},l.a.createElement("div",{className:"content"},l.a.createElement("h4",null,"\u041f\u0440\u0438\u0445\u043e\u0434 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d"),t&&l.a.createElement("div",{className:""},l.a.createElement("p",{className:n},"\u0414\u0430\u0442\u0430: ",t.date),l.a.createElement("p",{className:n},"\u041e\u0431\u044a\u0435\u043c \u043e\u0431\u0449\u0438\u0439: ",t.volume.toFixed(2),"  (",t.back_calc_volume.toFixed(2),") \u043c3"),l.a.createElement("p",{className:n},"\u041e\u0431\u0449\u0430\u044f \u0441\u0443\u043c\u043c\u0430: ",t.employee_cash&&t.employee_cash.toFixed(1)," (",t.back_calc_cash.toFixed(1),") \u0440\u0443\u0431\u043b\u0435\u0439"),l.a.createElement("p",{className:n},"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435: ",t.note),l.a.createElement(Oe,{lumbers:t.lumber_records})),a&&l.a.createElement("h2",{className:"color-green1-light text-center"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!")))}function je(e){var t=e.totalCash,a=e.employees,n=e.activeEmployees,r=e.addEmployee;return l.a.createElement("div",{className:"content"},l.a.createElement("h4",null,"\u041a\u0442\u043e \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a? ",n.length>0&&"("+n.length+")"),l.a.createElement("div",{className:"d-flex justify-content-between my-2 flex-wrap"},a.map((function(e){return l.a.createElement("div",{className:n.includes(e)?"bg-green2-light mx-1 my-1 rounded-xs px-2 py-2 ":"bg-dark1-dark mx-1 my-1 rounded-xs px-2 py-2 ",onClick:function(){return r(e)}},e.nickname)}))),n.length>0&&l.a.createElement("div",null,l.a.createElement("div",{className:"d-flex justify-content-start"},n.map((function(e){return l.a.createElement("div",{className:"mx-2"},l.a.createElement("span",{className:"d-block font-16"},e.nickname),t>0&&l.a.createElement("span",{className:"font-17 font-600"}," ",(t/n.length).toFixed(0)," \u0440\u0443\u0431"))})))))}var Re=function(){return{getInitData:function(e){var t=localStorage.getItem("token"),a=ne(e);return f()({method:"get",url:_.SHIFT_CREATE_PAGE_DATA,params:a,headers:{Authorization:"JWT ".concat(t)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=ae(e),t}))},createShift:function(e){var t=localStorage.getItem("token")||"";return f()({method:"post",url:_.SHIFT_CREATE_PAGE_CREATE,data:e,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(t)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=ae(e),t}))}}}(),Ie=function(e){Object(F.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).calcRowQuantity=function(e,t){return Object(ge.a)(Object(ge.a)({},e),{},{lumber:e.id,quantity:t,volume_total:t*e.volume,cash:t*e.volume*e.employee_rate,employee_rate:e.employee_rate})},n.calcRowRate=function(e,t){return Object(ge.a)(Object(ge.a)({},e),{},{lumber:e.id,quantity:e.quantity,volume_total:e.quantity*e.volume,cash:e.quantity*e.volume*t,employee_rate:t})},n.calcTotalVolume=function(e){var t=0;return e.map((function(e){t+=e.volume_total})),t},n.calcTotalCash=function(e){var t=0;return e.map((function(e){t+=e.cash})),t},n.calcRowAndTotal=function(e,t){var a,l=n.state.lumbers;"quantity"===e.target.name&&(a=n.calcRowQuantity(t,e.target.value)),"rate"===e.target.name&&(a=n.calcRowRate(t,e.target.value)),l=ie(l,a);var r=n.calcTotalVolume(l),c=n.calcTotalCash(l);n.setState(Object(ge.a)(Object(ge.a)({},n.state),{},{lumbers:l,totalVolume:r,totalCash:c,message:null}))},n.addEmployee=function(e){var t=n.state.activeEmployees;t=me(t,e),n.setState(Object(ge.a)(Object(ge.a)({},n.state),{},{activeEmployees:t}))},n.preSave=function(){var e=n.state,t=e.lumbers,a=e.totalCash,l=e.totalVolume,r=e.activeEmployees,c=[];r.map((function(e){return c=oe(c,e.id)}));var s=[];t.map((function(e){e.cash>0&&e.quantity>0&&(s=oe(s,e))}));var o={shift_type:"day",date:null,raw_records:s,employees:c,employee_cash:a,volume:l,employeesData:r,cash_per_employee:a/c.length};n.setState(Object(ge.a)(Object(ge.a)({},n.state),{},{dataToSave:o}))},n.saveData=function(){Re.createShift(n.state.dataToSave).then((function(e){n.setState({message:"\u0414\u0430\u043d\u043d\u044b\u0435 \u0437\u0430\u043f\u0438\u0441\u0430\u043d\u044b.",createdShift:e})})),n.setState(Object(ge.a)(Object(ge.a)({},n.state),{},{activeEmployees:[],lumbers:n.state.initLumbers,totalVolume:0,totalCash:0,note:"",dataToSave:null}))},n.back=function(){n.setState({dataToSave:null})},n.switchCalc=function(e){n.setState({lumbers:n.state.initLumbers,totalCash:0,totalVolume:0,calcType:e,activeEmployees:[]})},n.state={lumbers:[],initLumbers:[],totalVolume:0,totaCash:0,createdShift:null,employees:[],activeEmployees:[],dataToSave:null,calcType:"mixed",message:null,error:null},n}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this;Re.getInitData().then((function(t){var a=t;e.setState({lumbers:a.lumbers,initLumbers:a.lumbers,employees:a.employees})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbers,n=t.totalVolume,r=t.totalCash,c=t.message,s=t.createdShift,o=t.dataToSave,u=t.calcType,m=t.activeEmployees,i=t.employees;return l.a.createElement("div",null,s?l.a.createElement(Ae,{shift:s,message:c}):o?l.a.createElement(Ce,{shift:o,saveData:this.saveData,back:this.back}):l.a.createElement("div",null,l.a.createElement("div",{className:"card card-style mb-1 mt-2"},l.a.createElement("div",{className:"content"},l.a.createElement("h2",null,"\u0421\u043c\u0435\u043d\u0430 "),l.a.createElement("div",{className:"d-flex justify-content-between my-2"},l.a.createElement("button",{className:"mixed"===u?"btn btn-s bg-highlight":"btn btn-s border",onClick:function(){return e.switchCalc("mixed")}},"\u0434\u043e\u0441\u043a\u0430 \u043f\u0435\u0440\u0435\u043c\u0435\u0448\u043a\u0443"),l.a.createElement("button",{className:"sorted"===u?"btn btn-s bg-highlight":"btn btn-s border",onClick:function(){return e.switchCalc("sorted")}},"\u0434\u043e\u0441\u043a\u0430 \u043f\u043e \u0441\u043e\u0440\u0442\u0430\u043c")),a.length>0&&l.a.createElement(xe,{calcType:this.state.calcType,lumbers:a,calcRowAndTotal:this.calcRowAndTotal,totalCash:r,totalVolume:n}))),l.a.createElement("div",{className:"card card-style mb-3"},l.a.createElement(je,{totalCash:r,employees:i,activeEmployees:m,addEmployee:this.addEmployee})),(m.length>0&&r>0)>0&&l.a.createElement("button",{onClick:this.preSave,className:"mt-4 btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm shadow-l"},"\u0414\u0430\u043b\u0435\u0435")))}}]),a}(n.Component),Le=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,shopToSee:e.auth.shopToSee}}),(function(e){return{}}))(Ie),De=function(){return{getInitData:function(e){var t=localStorage.getItem("token"),a=ne(e);return f()({method:"get",url:_.SALE_CREATE_PAGE_DATA,params:a,headers:{Authorization:"JWT ".concat(t)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=ae(e),t}))},createSale:function(e){var t=localStorage.getItem("token")||"";return f()({method:"post",url:_.SALE_CREATE_PAGE_CREATE,data:e,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(t)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=ae(e),t}))}}},Fe=a(56),Pe=a(419),Ve=a(428),Me=a(427);function Ge(e){var t=e.lumber,a=e.calcRowQnty,n=e.calcRowVolume,r=e.calcRowCash,c=(e.setRamaPrice,e.label);return l.a.createElement("div",{className:""},l.a.createElement("h5",null,c,":"),l.a.createElement("div",{className:"d-flex justify-content-start "},l.a.createElement(U.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e",type:"number",onChange:function(e){return a(e,t.id)},value:t.quantity>0&&t.quantity}),l.a.createElement(U.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u041e\u0431\u044a\u0435\u043c",type:"number",onChange:function(e){return n(e,t.id)},value:t.volume_total>0&&t.volume_total})),l.a.createElement("div",{className:"d-flex justify-content-start mt-2"},l.a.createElement(U.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u0426\u0435\u043d\u0430 \u0437\u0430 1\u043c3",type:"number",onChange:function(e){return r(e,t.id)},value:t.selling_price>0&&t.selling_price}),l.a.createElement(U.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",disabled:!0,label:"\u0421\u0443\u043c\u043c\u0430",type:"number",value:t.selling_total_cash>0&&t.selling_total_cash})))}function qe(e){var t=e.woodSpecie,a=e.lumberType,n=e.pineBrus,r=e.pineDoska,c=e.larchBrus,s=e.larchDoska,o=[];return"pine"===t&&"brus"===a&&(o=n),"pine"===t&&"doska"===a&&(o=r),"larch"===t&&"brus"===a&&(o=c),"larch"===t&&"doska"===a&&(o=s),l.a.createElement("optgroup",{label:!0},o.map((function(e){return l.a.createElement("option",{value:e.id},"".concat(e.name," ").concat(e.wood_species)," ")})))}function Ue(e){var t=e.lumber,a=e.setLumberID,r=e.calcRowQnty,c=e.calcRowCash,s=e.pineBrus,o=e.pineDoska,u=e.turnCalc,m=e.delLumber,i=e.larchBrus,d=e.calcRoundRowQnty,h=e.calcRowVolume,p=e.calcRoundRowVolume,E=e.calcChinaRowQnty,b=e.calcChinaRowVolume,f=e.setRamaPrice,g=(e.stockType,e.larchDoska),_=Object(n.useRef)(null),v=Object(n.useState)("pine"),S=Object(Fe.a)(v,2),y=S[0],N=S[1],k=Object(n.useState)("brus"),T=Object(Fe.a)(k,2),w=T[0],x=T[1],O="btn btn-m border w-100 mx-2";return l.a.createElement("div",{className:"mt-2 mb-3 px-2 py-3 bg-white rounded-m border",ref:_},l.a.createElement(Ve.a,{htmlFor:"grouped-native-select",className:"text-center font-19 font-600 color-black"},"\u041f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b ",t.id+1),l.a.createElement("div",{className:"d-flex justify-content-around my-2"},[["pine","\u0441\u043e\u0441\u043d\u0430"],["larch","\u043b\u0438\u0441\u0442\u0432\u0435\u043d\u043d\u0438\u0446\u0430"]].map((function(e){return l.a.createElement("button",{className:e[0]===y?O+" bg-green2-light":O,onClick:function(){return N(e[0])}},e[1])}))),l.a.createElement("div",{className:"d-flex justify-content-around mb-2"},[["brus","\u0431\u0440\u0443\u0441"],["doska","\u0434\u043e\u0441\u043a\u0430"]].map((function(e){return l.a.createElement("button",{className:e[0]===w?O+" bg-yellow1-light":O,onClick:function(){return x(e[0])}},e[1])}))),l.a.createElement(Pe.a,{native:!0,defaultValue:"",id:"grouped-native-select",className:"color-dark1-light",fullWidth:!0,value:t.lumber,onChange:function(e){return a(e,t.id)},name:"lumber","data-id":t.id,onClick:function(){return _.current.scrollIntoView()}},l.a.createElement("option",{"aria-label":"None"}),l.a.createElement(qe,{woodSpecie:y,lumberType:w,pineBrus:s,pineDoska:o,larchBrus:i,larchDoska:g})),t.lumber>0&&l.a.createElement("div",{className:"mt-2"},l.a.createElement("div",{className:"d-flex justify-content-around"},l.a.createElement("button",{className:"exact"===t.calc_type?"btn btn-m bg-blue1-light":"btn btn-m border",onClick:function(){return u(t.id,"exact")}},"\u0441\u0447\u0435\u0442 \u0422"),l.a.createElement("button",{className:"round"===t.calc_type?"btn btn-m bg-blue1-light":"btn btn-m border",onClick:function(){return u(t.id,"round")}},"\u0441\u0447\u0435\u0442 \u041e"),t.china_volume>0&&l.a.createElement("button",{className:"china"===t.calc_type?"btn btn-m bg-blue1-light":"btn btn-m border",onClick:function(){return u(t.id,"china")}},"\u041a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442")),"exact"===t.calc_type&&l.a.createElement(Ge,{lumber:t,label:"\u0421\u0447\u0435\u0442 \u0422",calcRowQnty:r,calcRowVolume:h,calcRowCash:c,setRamaPrice:f}),"round"===t.calc_type&&l.a.createElement(Ge,{lumber:t,label:"\u0421\u0447\u0435\u0442 \u041e",calcRowQnty:d,calcRowVolume:p,calcRowCash:c,setRamaPrice:f}),"china"===t.calc_type&&l.a.createElement(Ge,{lumber:t,label:"\u041a\u0438\u0442\u0430\u0439\u0441\u043a\u0438\u0439 \u0441\u0447\u0435\u0442",calcRowQnty:E,calcRowVolume:b,calcRowCash:c,setRamaPrice:f})),t.lumber>0&&l.a.createElement("button",{className:"btn btn-sm bg-red2-light mt-2 ",onClick:function(){return m(t.id)}},"\u0443\u0434\u0430\u043b\u0438\u0442\u044c"))}function He(e){var t=e.setAddParams,a=e.seller,n=e.sellers,r=e.client,c=e.delivery_fee,s=e.preSave;return l.a.createElement("div",null,l.a.createElement("div",{className:"d-flex justify-content-between mb-1 "},l.a.createElement(U.a,{className:"pr-2 pt-2",variant:"standard",label:"\u0418\u043c\u044f \u043a\u043b\u0438\u0435\u043d\u0442\u0430",type:"text",name:"client",onChange:t,value:r&&r}),l.a.createElement(Me.a,{className:"pb-4"},l.a.createElement(Ve.a,null,"\u041f\u0440\u043e\u0434\u0430\u0432\u0435\u0446"),l.a.createElement(Pe.a,{native:!0,defaultValue:"",className:"color-dark1-light",value:a,onChange:t,name:"seller"},l.a.createElement("option",{"aria-label":"None"}),n&&n.length>0&&n.map((function(e){return l.a.createElement("option",{value:e.id},e.nickname," ")}))))),l.a.createElement("div",{className:"d-flex justify-content-between mb-1 "},l.a.createElement(U.a,{className:"pr-2",id:"outlined-margin-dense",variant:"outlined",label:"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430",type:"number",name:"delivery_fee",onChange:t,value:c>0&&c})),l.a.createElement("button",{onClick:s,className:"btn btn-center-xl btn-xxl text-uppercase font-900 bg-highlight rounded-sm \r shadow-l mt-4"},"\u0414\u0430\u043b\u0435\u0435"))}function Je(e){var t=e.lumber_records;return l.a.createElement("table",{className:"table table-sm table-responsive mt-2"},l.a.createElement("thead",null,l.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),l.a.createElement("th",null,"\u043a\u043e\u043b-\u0432\u043e"),l.a.createElement("th",null,"\u043e\u0431\u044a\u0435\u043c"),l.a.createElement("th",null,"\u0446\u0435\u043d\u0430 \u0437\u0430 1\u043c3"),l.a.createElement("th",null,"\u0441\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438")),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.name),l.a.createElement("td",null,e.quantity," \u0448\u0442"),l.a.createElement("td",null,e.volume_total," \u043c3"),l.a.createElement("td",null,e.selling_price," \u0440\u0443\u0431"),l.a.createElement("td",null,e.selling_total_cash," \u0440\u0443\u0431"))}))))}function We(e){var t=e.sale,a=e.message,n="mb-1 font-15 font-400 color-black";return l.a.createElement("div",{className:"card card-style mt-2"},l.a.createElement("div",{className:"content"},l.a.createElement("h4",null,"\u0417\u0430\u043f\u0438\u0441\u044c \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u0430"),t&&l.a.createElement("div",{className:""},l.a.createElement("p",{className:n},"\u0414\u0430\u0442\u0430: ",t.date),l.a.createElement("p",{className:n},"\u041a\u043b\u0438\u0435\u043d\u0442: ",t.client),l.a.createElement("p",{className:n},"\u041e\u0431\u044a\u0435\u043c: ",t.volume.toFixed(4)," \u043c3"),l.a.createElement("p",{className:n},"\u0412\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u0435 \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0430: ",t.seller_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),l.a.createElement("p",{className:n},"\u0421\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0434\u043e\u0441\u0442\u0430\u0432\u043a\u0438: ",t.delivery_fee," \u0440\u0443\u0431\u043b\u0435\u0439"),l.a.createElement("p",{className:"mb-1 font-17 font-500 color-black"},"\u0421\u0443\u043c\u043c\u0430 \u043f\u0440\u043e\u0434\u0430\u0436\u0438: ",t.selling_total_cash.toFixed(1),"  \u0440\u0443\u0431\u043b\u0435\u0439"),l.a.createElement(Je,{lumber_records:t.lumber_records})),a&&l.a.createElement("h2",{className:"color-green1-light text-center"},"\u0414\u0430\u043d\u043d\u044b\u0435 \u0441\u043e\u0445\u0440\u0430\u043d\u0435\u043d\u044b!")))}function Ke(e){var t=e.sale,a=e.saveData,n=e.back,r=e.sellers,c="mb-1 font-15 font-400 color-black",s=null;return r&&(s=ue(r,t.seller)),l.a.createElement("div",{className:"card card-style mt-2"},l.a.createElement("div",{className:"content"},l.a.createElement("h4",null,"\u041f\u0440\u043e\u0432\u0435\u0440\u044f\u0435\u043c \u0434\u0430\u043d\u043d\u044b\u0435"),t&&l.a.createElement("div",{className:""},l.a.createElement("p",{className:c},"\u041a\u043b\u0438\u0435\u043d\u0442: ",t.client),l.a.createElement("p",{className:c},"\u041e\u0431\u044a\u0435\u043c: ",t.volume.toFixed(4)," \u043c3"),l.a.createElement("p",{className:c},"\u0413\u0440\u0443\u0437\u0447\u0438\u043a: ",t.loader?"\u0434\u0430":"\u043d\u0435\u0442"," "),l.a.createElement("p",{className:c},"\u041f\u0440\u043e\u0434\u0430\u0432\u0435\u0446: ",s?s.nickname:"\u043d\u0435\u0442"),l.a.createElement("p",{className:c},"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430: ",t.deliveryFee?t.deliveryFee+"\u0440\u0443\u0431\u043b\u0435\u0439":"\u043d\u0435\u0442"),l.a.createElement("p",{className:"mb-1 font-17 font-500 color-black"},"\u0421\u0443\u043c\u043c\u0430: ",t.sale_cash.toFixed(1)," \u0440\u0443\u0431\u043b\u0435\u0439"),l.a.createElement(Je,{lumber_records:t.raw_records})),l.a.createElement("div",{className:"d-flex justify-content-around"},l.a.createElement("button",{onClick:n,className:"btn btn-s mr-2 text-uppercase font-900 bg-dark color-white rounded-sm shadow-l"},"\u043d\u0430\u0437\u0430\u0434"),l.a.createElement("button",{onClick:a,className:"btn btn-s text-uppercase font-900 bg-highlight rounded-sm shadow-l mt-2"},"\u0420\u0430\u0441\u0441\u0447\u0438\u0442\u0430\u0442\u044c \u0438 \u0441\u043e\u0445\u0440\u0430\u043d\u0438\u0442\u044c \u0434\u0430\u043d\u043d\u044b\u0435"))))}var Qe=De(),ze=function(e){Object(F.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).addLumberToSale=function(){n.setState(Object(ge.a)(Object(ge.a)({},n.state),{},{lumbersToSale:[].concat(Object(re.a)(n.state.lumbersToSale),[{id:n.state.lumbersToSale.length}])}))},n.setLumberID=function(e,t){var a=n.state,l=a.lumbersToSale,r=a.lumbers,c=ue(r,e.target.value);l=ie(l,c=Object(ge.a)(Object(ge.a)({},c),{},{id:t})),n.setState({lumbersToSale:l})},n.calcRowQnty=function(e,t){var a=n.state.lumbersToSale,l=ue(a,t);l.quantity=e.target.value?parseInt(e.target.value):0,l.volume_total=(l.volume*l.quantity).toFixed(4),l.selling_total_cash=(l.volume_total*l.selling_price).toFixed(0),a=ie(a,l);var r=n.calcTotal(a),c=r.totalCash,s=r.totalVolume;n.setState({lumbersToSale:a,totalCash:c,totalVolume:s})},n.calcRowVolume=function(e,t){var a=n.state.lumbersToSale,l=ue(a,t);l.volume_total=e.target.value?parseFloat(e.target.value):0,l.quantity=(l.volume_total/l.volume).toFixed(4),l.selling_total_cash=(l.volume_total*l.selling_price).toFixed(0),a=ie(a,l);var r=n.calcTotal(a),c=r.totalCash,s=r.totalVolume;n.setState({lumbersToSale:a,totalCash:c,totalVolume:s})},n.calcRowCash=function(e,t){var a=n.state.lumbersToSale,l=ue(a,t);l.selling_price=e.target.value?parseInt(e.target.value):0,l.selling_total_cash=(l.volume_total*l.selling_price).toFixed(0),a=ie(a,l);var r=n.calcTotal(a),c=r.totalCash,s=r.totalVolume;n.setState({lumbersToSale:a,totalCash:c,totalVolume:s})},n.calcRoundRowQnty=function(e,t){var a=n.state.lumbersToSale,l=ue(a,t);l.quantity=e.target.value?parseInt(e.target.value):0,l.volume_total=(l.round_volume*l.quantity).toFixed(4),l.selling_total_cash=(l.volume_total*l.selling_price).toFixed(0),a=ie(a,l);var r=n.calcTotal(a),c=r.totalCash,s=r.totalVolume;n.setState({lumbersToSale:a,totalCash:c,totalVolume:s})},n.calcRoundRowVolume=function(e,t){var a=n.state.lumbersToSale,l=ue(a,t);l.volume_total=e.target.value?parseFloat(e.target.value):0,l.quantity=(l.volume_total/l.round_volume).toFixed(0),l.selling_total_cash=(l.volume_total*l.selling_price).toFixed(0),a=ie(a,l);var r=n.calcTotal(a),c=r.totalCash,s=r.totalVolume;n.setState({lumbersToSale:a,totalCash:c,totalVolume:s})},n.calcChinaRowQnty=function(e,t){var a=n.state.lumbersToSale,l=ue(a,t);l.quantity=e.target.value?parseInt(e.target.value):0,l.volume_total=(l.china_volume*l.quantity).toFixed(4),l.selling_total_cash=(l.volume_total*l.selling_price).toFixed(0),a=ie(a,l);var r=n.calcTotal(a),c=r.totalCash,s=r.totalVolume;n.setState({lumbersToSale:a,totalCash:c,totalVolume:s})},n.calcChinaRowVolume=function(e,t){var a=n.state.lumbersToSale,l=ue(a,t);l.volume_total=e.target.value?parseFloat(e.target.value):0,l.quantity=(l.volume_total/l.china_volume).toFixed(0),l.selling_total_cash=(l.volume_total*l.selling_price).toFixed(0),a=ie(a,l);var r=n.calcTotal(a),c=r.totalCash,s=r.totalVolume;n.setState({lumbersToSale:a,totalCash:c,totalVolume:s})},n.setShopPrice=function(e,t){var a=n.state.lumbersToSale,l=ue(a,t);l.shop_price=e.target.value?parseFloat(e.target.value):0,a=ie(a,l),n.setState({lumbersToSale:a})},n.turnCalc=function(e,t){var a=n.state.lumbersToSale,l=ue(a,e);"round"===t&&(l.volume_total=(l.quantity*l.round_volume).toFixed(3)),"exact"===t&&(l.volume_total=(l.quantity*l.volume).toFixed(4)),"china"===t&&(l.volume_total=(l.quantity*l.china_volume).toFixed(4),l.selling_price=0),l.calc_type=t,l.selling_total_cash=(l.volume_total*l.selling_price).toFixed(0),a=ie(a,l);var r=n.calcTotal(a),c=r.totalCash,s=r.totalVolume;n.setState({lumbersToSale:a,totalCash:c,totalVolume:s})},n.calcTotal=function(e){var t=0,a=0;return e.map((function(e){t+=parseInt(e.selling_total_cash),a+=parseFloat(e.volume_total)})),{totalCash:t.toFixed(0),totalVolume:a.toFixed(4)}},n.delLumber=function(e){var t=n.state.lumbersToSale,a=ue(t,e);t=me(t,a);var l=n.calcTotal(t),r=l.totalCash,c=l.totalVolume;n.setState({lumbersToSale:t,totalCash:r,totalVolume:c})},n.setAddParams=function(e){"loader"===e.target.name||"bonus_kladman_label"===e.target.name?n.setState(Object(_e.a)({},e.target.name,!n.state[e.target.name])):n.setState(Object(_e.a)({},e.target.name,e.target.value))},n.setChinaVira=function(e){var t=n.state.lumbersToSale,a=n.calcTotal(t).totalCash,l=parseInt(e.target.value);l>0&&(a-=l),n.setState({totalCash:a,china_vira:l})},n.preSave=function(){var e=n.state,t=e.lumbersToSale,a=e.loader,l=e.seller,r=e.bonus_kladman_label,c=e.bonus_kladman,s=e.delivery_fee,o=e.totalCash,u=e.totalVolume,m=e.client,i=e.china_vira,d=[];t.map((function(e){e.selling_total_cash>0&&e.quantity>0&&(d=oe(d,e))}));var h={raw_records:d,date:null,loader:a,seller:l,bonus_kladman:r?c:null,client:m,delivery_fee:s,sale_cash:parseFloat(o),volume:parseFloat(u),china_vira:i};n.setState({dataToSave:h})},n.saveData=function(){Qe.createSale(n.state.dataToSave).then((function(e){n.setState({message:e.message,createdSale:e.sale})}))},n.back=function(){n.setState({dataToSave:null})},n.state={pineBrus:[],larchBrus:[],pineDoska:[],larchDoska:[],lumbers:[],sellers:[],seller:null,bonus_kladman:null,bonus_kladman_label:!1,loader:!1,client:"",china_vira:0,delivery_fee:0,lumbersToSale:[],createdSale:null,dataToSave:null,message:null,error:null,totalCash:0,totalVolume:0},n}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this;Qe.getInitData({stock_type:this.props.user.shop_type}).then((function(t){e.setState({pineBrus:t.pine_brus_lumbers,larchBrus:t.larch_brus_lumbers,pineDoska:t.pine_doska_lumbers,larchDoska:t.larch_doska_lumbers,lumbers:t.lumbers,sellers:t.sellers,bonus_kladman:t.kladman_id})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.lumbersToSale,n=t.totalVolume,r=t.totalCash,c=t.createdSale,s=t.dataToSave,o=t.message;return l.a.createElement("div",{className:""},c?l.a.createElement(We,{sale:c,message:o}):s?l.a.createElement(Ke,{sale:s,saveData:this.saveData,back:this.back,sellers:this.state.sellers}):l.a.createElement("div",null,l.a.createElement("div",{className:"content"},l.a.createElement("h3",null,"\u0427\u0442\u043e \u043f\u0440\u043e\u0434\u0430\u0435\u043c?"),a.length>0&&a.map((function(t){return t&&l.a.createElement(Ue,{stockType:e.props.user.shop_type,lumber:t,setLumberID:e.setLumberID,calcRowQnty:e.calcRowQnty,calcRowCash:e.calcRowCash,calcRowVolume:e.calcRowVolume,calcRoundRowQnty:e.calcRoundRowQnty,calcRoundRowVolume:e.calcRoundRowVolume,calcChinaRowQnty:e.calcChinaRowQnty,calcChinaRowVolume:e.calcChinaRowVolume,setShopPrice:e.setShopPrice,turnCalc:e.turnCalc,delLumber:e.delLumber,pineBrus:e.state.pineBrus,larchBrus:e.state.larchBrus,pineDoska:e.state.pineDoska,larchDoska:e.state.larchDoska})})),l.a.createElement("div",{className:"d-flex justify-content-center"},l.a.createElement("button",{className:"mt-1 btn btn-l bg-highlight",onClick:this.addLumberToSale},"\u0414\u043e\u0431\u0430\u0432\u0438\u0442\u044c \u043f\u0438\u043b\u043e\u043c\u0430\u0442\u0435\u0440\u0438\u0430\u043b"))),r>0&&l.a.createElement("div",{className:"card card-style mt-2"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"d-flex justify-content-between"},l.a.createElement("p",{className:"font-15 mb-0"},"\u041e\u0431\u044a\u0435\u043c: ",n," \u043c3"),l.a.createElement("p",{className:"font-15 mb-0"},"\u0418\u0442\u043e\u0433\u043e: ",r," \u0440")),l.a.createElement(He,{setAddParams:this.setAddParams,sellers:this.state.sellers,seller:this.state.seller,bonus_kladman_label:this.state.bonus_kladman_label,loader:this.state.loader,client:this.state.client,delivery_fee:this.state.delivery_fee,china_vira:this.state.china_vira,setChinaVira:this.setChinaVira,preSave:this.preSave})))))}}]),a}(n.Component),Be=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,state:e}}),(function(e){return{}}))(ze),Ye=function(){return{getSaleList:function(e){var t=localStorage.getItem("token"),a=ne(e);return f()({method:"get",url:_.SALE_LIST_PAGE_LIST,headers:{Authorization:"JWT ".concat(t)},params:a}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=ae(e),t}))},deleteSale:function(e){var t=localStorage.getItem("token")||"";return f()({method:"delete",url:_.sale_list_delete(e),headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(t)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=ae(e),t}))}}}();function Xe(e){var t=e.sales,a=e.totals,n=e.deleteSale,r=e.shop;return l.a.createElement("table",{className:"table table-sm table-responsive"},l.a.createElement("thead",null,l.a.createElement("th",null,"\u0414\u0430\u0442\u0430/\u041a\u043b\u0438\u0435\u043d\u0442"),l.a.createElement("th",null,"\u041f\u0438\u043b\u043e\u043c\u0430\u0442"),l.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430/\u041e\u0431\u044a\u0435\u043c"),l.a.createElement("th",{style:{lineHeight:"13px"}},"seller_kladman_same"===r.sale_type?"\u041f\u0440\u043e\u0434\u0430\u0432e\u0446 (\u043a\u043e\u043c\u0438\u0441\u0441\u0438\u044f \u043a\u043b\u0430\u0434\u043c\u044d\u043d\u0430 \u0438\u0437 \u0432\u043e\u0437\u043d\u0430\u0433\u0440\u0430\u0436\u0434\u0435\u043d\u0438\u044f \u043f\u0440\u043e\u0434\u0430\u0432\u0446\u0430)":"\u041f\u0440\u043e\u0434\u0430\u0432e\u0446"),l.a.createElement("th",null,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430"),l.a.createElement("th",{className:"text-nowrap"},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",{style:{lineHeight:"15px"}},e.date,l.a.createElement("span",{className:"d-block"},e.note),l.a.createElement("span",{className:"font-13"},e.sale_type)),l.a.createElement("td",{className:"text-nowrap"},e.lumber_records.map((function(e){return l.a.createElement("span",{className:"d-block mb-2",style:{lineHeight:"14px"}},e.quantity,"\u0448\u0442 ",e.lumber,l.a.createElement("span",{className:"d-block font-italic"},e.wood_species),l.a.createElement("span",{className:"d-block font-italic"},"\u0440\u043e\u0437\u043d\u0438\u0446\u0430 \u043e\u0431\u0449 ",l.a.createElement("span",{className:"font-500"},e.selling_total_cash)),l.a.createElement("span",{className:"d-block font-italic"},"\u0440\u043e\u0437\u043d\u0438\u0446\u0430 1\u043c3 ",l.a.createElement("span",{className:"font-500"},e.selling_price)),l.a.createElement("span",{className:"d-block font-italic"},"\u043e\u043f\u0442 \u043e\u0431\u0449 ",l.a.createElement("span",{className:"font-500"},e.shop_total_cash)),l.a.createElement("span",{className:"d-block font-italic"},"\u043e\u043f\u0442 1\u043c3 ",l.a.createElement("span",{className:"font-500"},e.shop_price)))}))),l.a.createElement("td",null,l.a.createElement("span",null,e.selling_total_cash,"\u0440"),l.a.createElement("span",{className:"d-block"},e.volume," \u043c3")),l.a.createElement("td",{style:{lineHeight:"15px"}},"seller_kladman_same"===r.sale_type?l.a.createElement("span",{className:"d-block"},l.a.createElement("span",{className:"d-block"},e.seller_fee-e.kladman_fee),"(".concat(e.seller_fee,"  - ").concat(e.kladman_fee,")")):l.a.createElement("span",{className:"d-block"},e.seller_fee),e.seller_name&&l.a.createElement("span",{className:""},e.seller_name)),l.a.createElement("td",null,e.delivery_fee),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-xs bg-red1-light",value:e.id,onClick:n},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))})),l.a.createElement("tr",{className:"font-500 font-16"},l.a.createElement("td",null,"\u0418\u0442\u043e\u0433\u043e"),l.a.createElement("td",null,"-"),l.a.createElement("td",null,a.total_selling_cash),l.a.createElement("td",null,"seller_kladman_same"===r.sale_type?l.a.createElement("span",null,l.a.createElement("span",{className:"d-block"},a.total_seller_fee-a.total_kladman_fee),"(".concat(a.total_seller_fee,"  - ").concat(a.total_kladman_fee,")")):a.total_seller_fee),l.a.createElement("td",null,a.total_delivery_fee),l.a.createElement("td",null,a.total_add_expenses))))}var Ze=function(e){Object(F.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).deleteSale=function(e){Ye.deleteSale(e.target.value).then((function(e){n.setState(Object(ge.a)(Object(ge.a)({},n.state),{},{saleList:e.sales,totals:e.totals}))}))},n.setData=function(e){n.setState(Object(_e.a)({},e.target.name,e.target.value))},n.showResults=function(){Ye.getSaleList({shop:n.props.shopToSee.id,date_before:n.state.endDate,date_after:n.state.startDate}).then((function(e){n.setState(Object(ge.a)(Object(ge.a)({},n.state),{},{saleList:e.sales,totals:e.totals}))}))},n.state={saleList:[],totals:{},startDate:"",endDate:"",message:null,error:null},n}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=new Date,a=he(new Date),n=he(t);Ye.getSaleList({shop:this.props.shopToSee.id,date_before:n,date_after:a}).then((function(t){e.setState(Object(ge.a)(Object(ge.a)({},e.state),{},{saleList:t.sales,totals:t.totals,startDate:a,endDate:n}))}))}},{key:"render",value:function(){var e=this.state,t=e.saleList,a=e.totals;return l.a.createElement("div",{className:"mt-2"},l.a.createElement("div",{className:"card card-style mt-2"},l.a.createElement("div",{className:"content"},l.a.createElement(K,{startDate:this.state.startDate,endDate:this.state.endDate,setData:this.setData,showResults:this.showResults}))),l.a.createElement("div",{className:"card card-style mb-2"},l.a.createElement("div",{className:"content"},l.a.createElement("h4",{className:"mb-2"},"\u041f\u0440\u043e\u0434\u0430\u0436\u0438 (",t.length,")"),t.length>0?l.a.createElement(Xe,{sales:t,totals:a,deleteSale:this.deleteSale,shop:this.props.shopToSee}):l.a.createElement("h5",null,"\u041d\u0435\u0442 \u043f\u0440\u043e\u0434\u0430\u0436"))))}}]),a}(n.Component),$e=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,shopToSee:e.auth.shopToSee,state:e}}),(function(e){return{}}))(Ze);function et(e){var t=e.expenses,a=e.deleteExpense;return l.a.createElement("div",null,l.a.createElement("table",{className:"table table-sm"},l.a.createElement("thead",null,l.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430"),l.a.createElement("th",null,"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435")),l.a.createElement("tbody",null,t.length>0&&t.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,e.amount," \u0440\u0443\u0431"),l.a.createElement("td",null,e.note),l.a.createElement("td",null,l.a.createElement("button",{className:"btn btn-s bg-red1-light",onClick:function(){return a(e.id)}},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c")))})))))}function tt(e){var t=Object(n.useState)(),a=Object(Fe.a)(t,2),r=a[0],c=a[1],s=Object(n.useState)(""),o=Object(Fe.a)(s,2),u=o[0],m=o[1];return l.a.createElement("div",{className:""},l.a.createElement(U.a,{className:"mb-2",id:"outlined-margin-dense",variant:"outlined",fullWidth:!0,label:"\u0421\u0443\u043c\u043c\u0430",type:"number",onChange:function(e){return c(e.target.value)},value:r}),l.a.createElement(U.a,{className:"mb-2",id:"outlined-margin-dense",variant:"outlined",fullWidth:!0,label:"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435",type:"text",onChange:function(e){return m(e.target.value)},value:u}),l.a.createElement("button",{className:"btn btn-m bg-highlight mt-2",onClick:function(){return e.createExpense({amount:r,note:u})}},"\u0417\u0430\u043f\u0438\u0441\u0430\u0442\u044c"))}var at=function(){return{getExpenses:function(e){var t=localStorage.getItem("token"),a=ne(e);return f()({method:"get",url:_.EXPENSES_PAGE_LIST,params:a,headers:{Authorization:"JWT ".concat(t)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=ae(e),t}))},createExpense:function(e){var t=localStorage.getItem("token")||"";return f()({method:"post",url:_.EXPENSES_PAGE_CREATE,data:e,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(t)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=ae(e),t}))},deleteExpense:function(e){var t=localStorage.getItem("token")||"";return f()({method:"delete",url:_.expenses_page_delete(e),headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(t)}}).then((function(e){return e.data})).catch((function(e){var t=new Error(e);throw t.data=ae(e),t}))}}}(),nt=function(e){Object(F.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).createExpense=function(e){at.createExpense(e).then((function(e){n.setState({message:e.message,createdExpense:e.expense,expenses:e.records,total:e.total})}))},n.deleteExpense=function(e){at.deleteExpense(e).then((function(e){n.setState(Object(ge.a)(Object(ge.a)({},n.state),{},{expenses:e.records,total:e.totals,amount:0}))}))},n.state={createExpense:null,expenses:[],total:null},n}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this;at.getExpenses({created_at_after:de()}).then((function(t){e.setState({expenses:t.records,total:t.total})}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.expenses,n=t.createdExpense,r=t.total;return l.a.createElement("div",{className:"card card-style mt-2"},l.a.createElement("div",{className:"content mb-0"},l.a.createElement("h3",{className:""},"\u0420\u0430\u0441\u0445\u043e\u0434\u044b")),l.a.createElement("div",{className:"content mb-0"},n?l.a.createElement("div",null,l.a.createElement("button",{className:"btn btn-m bg-highlight",onClick:function(){return e.setState({createdExpense:null})}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u0435\u0449\u0435")):l.a.createElement(tt,{createExpense:this.createExpense})),l.a.createElement("div",{className:"content"},l.a.createElement("h3",{className:"mb-1"},"\u0417\u0430 \u0434\u0435\u043d\u044c"),r&&l.a.createElement("h5",{className:"mb-1"},"\u0418\u0442\u043e\u0433\u043e: ",r,"\u0440"),l.a.createElement(et,{expenses:a,user:this.props.user,deleteExpense:this.deleteExpense})))}}]),a}(n.Component),lt=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,shopToSee:e.auth.shopToSee,state:e}}),(function(e){return{}}))(nt);function rt(e){var t=e.sales,a=e.sales_totals,n=e.sellers_fee;return l.a.createElement("div",null,l.a.createElement("table",{className:"table table-sm",style:{lineHeight:"17px"}},l.a.createElement("thead",null,l.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430"),l.a.createElement("th",null,"\u041f\u0440\u043e\u0434\u0430\u0432\u0435\u0446"),l.a.createElement("th",null,"\u0414\u043e\u0441\u0442\u0430\u0432\u043a\u0430")),l.a.createElement("tbody",null,t.length>0&&t.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",null,l.a.createElement("span",{className:"d-block"},e.client),l.a.createElement("span",null,e.selling_total_cash)),l.a.createElement("td",null,l.a.createElement("span",{className:"d-block"},e.seller_name),l.a.createElement("span",null,e.seller_fee)),l.a.createElement("td",null,l.a.createElement("span",null,e.delivery_fee)))})),a&&l.a.createElement("tr",null,l.a.createElement("td",{className:""},l.a.createElement("span",{className:"d-block font-15 "},"\u0418\u0442\u043e\u0433\u043e \u0434\u043e\u0445\u043e\u0434"),l.a.createElement("span",{className:"font-15 font-500 color-green2-light"},"+",a.total_selling_cash," \u0440")),l.a.createElement("td",null,n.length>0&&n.map((function(e){return e.total>0&&l.a.createElement("span",{className:"d-block"},e.name," ",e.total)}))),l.a.createElement("td",null,l.a.createElement("span",null,a.total_delivery_fee))))))}function ct(e){var t=e.records;return l.a.createElement("div",null,l.a.createElement("table",{className:"table table-sm"},l.a.createElement("thead",null,l.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430"),l.a.createElement("th",null,"\u041f\u0440\u0438\u043c\u0435\u0447\u0430\u043d\u0438\u0435")),l.a.createElement("tbody",null,t.length>0&&t.map((function(e){return l.a.createElement("tr",null,"withdraw_employee"==e.record_type&&l.a.createElement("td",{className:"text-nowrap color-red1-light"},"-",e.amount," \u0440"),"shop_expenses"==e.record_type&&l.a.createElement("td",{className:"text-nowrap color-red1-light"},"-",e.amount," \u0440"),"sale_income"==e.record_type&&l.a.createElement("td",{className:"text-nowrap color-green1-light"},"+",e.amount," \u0440"),l.a.createElement("td",{className:"text-nowrap"},e.note))})))))}var st=function(e){Object(F.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).createExpense=function(e){var t=localStorage.getItem("token");f()({method:"post",url:_.KLADMAN_EXPENSE_CREATE,data:e,headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(t)}}).then((function(e){n.setState({message:e.data.message,createdExpense:e.data.expense,allRecords:e.data.records,total:e.data.total})}))},n.setData=function(e){n.setState(Object(_e.a)({},e.target.name,e.target.value))},n.showResults=function(){var e=localStorage.getItem("token"),t=ne({shop:n.props.shopToSee.id,date:n.state.date});f()({method:"get",url:_.DAILY_REP,headers:{Authorization:"JWT ".concat(e)},params:t}).then((function(e){var t=e.data;n.setState({expenses:t.expense_records,total_expenses:t.expense_records_total,incomes:t.income_records,total_incomes:t.income_records_total,allRecords:t.records,total:t.records_total,sales:t.sales,sales_totals:t.sales_totals,sellers_fee:t.sales_sellers_fee})}))},n.state={createdExpense:null,expenses:[],incomes:[],sales:[],sellers_fee:[],allRecords:[],total:null,total_expenses:null,total_incomes:null,date:""},n}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token"),a=ne({date:de(),shop:this.props.shopToSee.id});f()({method:"get",url:_.DAILY_REP,params:a,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState({expenses:a.expense_records,total_expenses:a.expense_records_total,incomes:a.income_records,total_incomes:a.income_records_total,allRecords:a.records,total:a.records_total,sales:a.sales,sales_totals:a.sales_totals,sellers_fee:a.sales_sellers_fee,date:de()})}))}},{key:"render",value:function(){var e=this.state,t=e.expenses,a=e.total_expenses,n=e.sales,r=e.sales_totals;return l.a.createElement("div",{className:"card card-style mt-2 mb-0"},l.a.createElement("div",{className:"content mb-0 "},l.a.createElement("h3",{className:""},"\u0414\u043d\u0435\u0432\u043d\u043e\u0439 \u043e\u0442\u0447\u0435\u0442")),l.a.createElement("div",{className:"content mt-0"},l.a.createElement(Q,{date:this.state.date,setData:this.setData,showResults:this.showResults})),l.a.createElement("div",{className:"content mb-0 mt-0"},l.a.createElement("h5",{className:""},"\u041f\u0440\u043e\u0434\u0430\u0436\u0438"),l.a.createElement(rt,{sales:n,sales_totals:r,sellers_fee:this.state.sellers_fee})),l.a.createElement("div",{className:"content mt-0"},l.a.createElement("h5",{className:"mb-1"},"\u0420\u0430\u0441\u0445\u043e\u0434\u044b \u0437\u0430 \u0434\u0435\u043d\u044c"),a&&l.a.createElement("p",{className:"mb-1 font-15 color-black"},"\u0418\u0442\u043e\u0433\u043e \u0440\u0430\u0441\u0445\u043e\u0434:",l.a.createElement("span",{className:"font-500 color-red1-light"}," -",a,"\u0440")),l.a.createElement(ct,{records:t})))}}]),a}(n.Component),ot=Object(u.b)((function(e){return{isLoggedIn:e.auth.isLoggedIn,user:e.auth.user,shopToSee:e.auth.shopToSee,state:e}}),(function(e){return{}}))(st);function ut(e){var t=e.lastOperations;return l.a.createElement("div",{className:"card card-style mt-0"},l.a.createElement("div",{className:"content"},l.a.createElement("h4",null,"\u041f\u043e\u0441\u043b\u0435\u0434\u043d\u0438\u0435 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438"),t.length>0?l.a.createElement("table",{className:"table table-sm table-responsive",style:{lineHeight:"16px"}},l.a.createElement("thead",{className:""},l.a.createElement("th",null,"\u0414\u0430\u0442\u0430"),l.a.createElement("th",null,"\u0422\u0438\u043f"),l.a.createElement("th",null,"\u041f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"),l.a.createElement("th",null,"\u0421\u0443\u043c\u043c\u0430")),l.a.createElement("tbody",null,t.map((function(e){return l.a.createElement("tr",null,l.a.createElement("td",{className:"text-nowrap"},e.created_at),l.a.createElement("td",null,"withdraw_employee"===e.record_type?"\u041e\u043f\u043b\u0430\u0442\u0430 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0443":"\u0414\u043e\u043b\u0433 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0443 \u0441 \u043f\u0440\u0438\u0445\u043e\u0434\u0430"),l.a.createElement("td",null,e.employee),l.a.createElement("td",{className:"withdraw_employee"===e.record_type?"color-red1-light font-16":"color-green1-light font-16"},"withdraw_employee"===e.record_type?"-"+e.amount:"+"+e.amount))})))):l.a.createElement("div",null,"\u041d\u0435\u0442 \u043e\u043f\u0435\u0440\u0430\u0446\u0438\u0438")))}function mt(e){var t=e.newCash,a=e.newName,r=e.createRamshik,c=e.setData,s=Object(n.useState)(!1),o=Object(Fe.a)(s,2),u=o[0],m=o[1];return u?l.a.createElement("div",{className:"card card-style"},l.a.createElement("div",{className:"content"},l.a.createElement("div",{className:"  my-1"},l.a.createElement(U.a,{type:"text",name:"newName",value:a,onChange:c,label:"\u0418\u043c\u044f",fullWidth:!0,className:"mb-2"}),l.a.createElement(U.a,{type:"number",name:"newCash",value:t,onChange:c,label:"\u0411\u0430\u043b\u0430\u043d\u0441",fullWidth:!0})),l.a.createElement("div",{className:"d-flex justify-content-between mt-3"},l.a.createElement("button",{className:"btn btn-s bg-highlight",onClick:function(){return m(!1),r()}},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c"),l.a.createElement("button",{className:"btn btn-s bg-red1-light",onClick:function(){return m(!1)}},"\u041e\u0442\u043c\u0435\u043d\u0430")))):l.a.createElement("div",{className:"d-flex justify-content-center my-3"},l.a.createElement("button",{className:"btn btn-l bg-highlight",onClick:m},"\u0421\u043e\u0437\u0434\u0430\u0442\u044c \u043d\u043e\u0432\u043e\u0433\u043e \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0430"))}var it=function(e){Object(F.a)(a,e);var t=Object(P.a)(a);function a(e){var n;return Object(L.a)(this,a),(n=t.call(this,e)).payout=function(){var e=n.state,t=e.activeEmployee,a=e.amount,l=localStorage.getItem("token"),r=new FormData;r.append("employee",t.id),r.append("amount",a),f()({method:"post",url:_.EMPLOYEE_PAYOUT,data:r,headers:{"content-type":"multipart/form-data",Authorization:"JWT ".concat(l)}}).then((function(e){n.setState(Object(ge.a)(Object(ge.a)({},n.state),{},{message:e.data.message,employees:e.data.employees,activeEmployee:null,last_payouts:e.data.last_payouts}))})).catch((function(e){var t=new Error(e);throw t.data=ae(e),n.setState({message:"\u041e\u0448\u0438\u0431\u043a\u0430"}),t}))},n.setData=function(e){n.setState(Object(_e.a)({},e.target.name,e.target.value))},n.createRamshik=function(){var e=localStorage.getItem("token");f()({method:"post",url:_.EMPLOYEE_CREATE,data:{nickname:n.state.newName,cash:n.state.newCash},headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(e)}}).then((function(e){n.setState({employees:e.data.employees,activeEmployee:null})}))},n.deleteRamshik=function(){var e=localStorage.getItem("token");f()({method:"delete",url:_.manager_ramshiki_delete(n.state.activeEmployee.id),headers:{"content-type":"application/JSON",Authorization:"JWT ".concat(e)}}).then((function(e){n.setState({employees:e.data.employees,activeEmployee:null})}))},n.state={employees:[],activeEmployee:null,amount:0,last_payouts:[],message:null,error:null,newName:"",newCash:0},n}return Object(D.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=localStorage.getItem("token");f()({method:"get",url:_.EMPLOYEE_PAYOUT_INIT_DATA,headers:{Authorization:"JWT ".concat(t)}}).then((function(t){var a=t.data;e.setState(Object(ge.a)(Object(ge.a)({},e.state),{},{employees:a.employees,last_payouts:a.last_payouts}))}))}},{key:"render",value:function(){var e=this,t=this.state,a=t.employees,n=t.activeEmployee,r=t.amount,c=t.message,s=t.last_payouts;return l.a.createElement("div",{className:"mt-2"},l.a.createElement("div",{className:"card card-style mb-2"},l.a.createElement("div",{className:"content"},l.a.createElement("h4",{className:"mb-2"},"\u0420\u0430\u0441\u0447\u0435\u0442 \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u043e\u0432"),l.a.createElement("div",{className:""},a.length>0&&l.a.createElement("table",{className:"table table-sm"},l.a.createElement("thead",null,l.a.createElement("th",null,"\u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a"),l.a.createElement("th",null,"\u0431\u0430\u043b\u0430\u043d\u0441")),l.a.createElement("tbody",null,a.map((function(t){return l.a.createElement("tr",{className:n&&n.id===t.id&&"bg-green1-light",onClick:function(){return e.setState(Object(ge.a)(Object(ge.a)({},e.state),{},{activeEmployee:t,message:null}))}},l.a.createElement("td",null,t.nickname),l.a.createElement("td",null,t.cash," \u0440 /  ",t.cash_amount))})))),n&&l.a.createElement("div",{className:"w-100"},l.a.createElement("span",{className:"font-16 mr-3"},n.nickname),l.a.createElement("span",{className:"font-16 font-600"},n.cash," \u0440"),l.a.createElement("div",{className:"d-flex justify-content-start mt-2 mb-4"},l.a.createElement(U.a,{type:"number",className:"mr-3",value:r,onChange:function(t){return e.setState(Object(ge.a)(Object(ge.a)({},e.state),{},{amount:t.target.value}))}}),l.a.createElement("button",{className:"d-block btn btn-s bg-green2-light",onClick:this.payout},"\u041e\u043f\u043b\u0430\u0442\u0438\u0442\u044c")),l.a.createElement("button",{className:"d-block btn btn-s bg-red1-light mt-2",onClick:this.deleteRamshik},"\u0423\u0434\u0430\u043b\u0438\u0442\u044c \u043f\u043e\u0441\u0442\u0430\u0432\u0449\u0438\u043a\u0430")),c&&l.a.createElement("p",{className:"color-dark text-center"},c)))),l.a.createElement(mt,{newName:this.state.newName,newCash:this.state.newCash,setData:this.setData,createRamshik:this.createRamshik}),l.a.createElement(ut,{lastOperations:s}))}}]),a}(n.Component),dt=function(e){var t=Object(d.a)(),a=Object(m.createStore)(R,Object(i.composeWithDevTools)(Object(m.applyMiddleware)(t)));t.run(A);return a}();c.a.render(l.a.createElement(u.a,{store:dt},l.a.createElement(I.a,{maxSnack:3},l.a.createElement(s.a,null,l.a.createElement("div",{className:"app",id:"page"},l.a.createElement(ee,null),l.a.createElement("div",{className:"page-content header-clear"},l.a.createElement(o.c,null,l.a.createElement(o.a,{exact:!0,path:"/",component:X}),l.a.createElement(o.a,{exact:!0,path:"/manager/shift_list/",component:Te}),l.a.createElement(o.a,{exact:!0,path:"/manager/stock/",component:fe}),l.a.createElement(o.a,{exact:!0,path:"/manager/sale_list/",component:$e}),l.a.createElement(o.a,{exact:!0,path:"/manager/shift/create_shift/",component:Le}),l.a.createElement(o.a,{exact:!0,path:"/manager/sales/create_sale/",component:Be}),l.a.createElement(o.a,{exact:!0,path:"/manager/expenses/",component:lt}),l.a.createElement(o.a,{exact:!0,path:"/manager/daily_report/",component:ot}),l.a.createElement(o.a,{exact:!0,path:"/manager/ramshik_payments/",component:it}))))))),document.getElementById("root"))}},[[195,1,2]]]);
//# sourceMappingURL=main.bab77e64.chunk.js.map